<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src 'self' http://localhost:8000; style-src 'self' 'unsafe-inline';">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CommonGround â€” Thirdspace Finder</title>

    <style>
    /* 2. STYLE (Merged: Team Design + Your Variables) */
    :root {
      --bg: #4de8af; 
      --card: #ffffff;
      --accent: #4f46e5;
      --muted: #6b7280;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: monospace;
      font-size: 18px;
      background: var(--bg);
      color: #111;
    }

    /* NAVBAR */
    .navbar {
      background: #aaf4d7;
      border-bottom: 1px solid #e6e6f0;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .brand { display: flex; align-items: center; gap: 10px; }
    .logo { width: 80px; height: 80px; object-fit: contain; }
    .profile-btn { background: #eef2ff; padding: 6px 10px; border-radius: 8px; cursor: pointer; }

    /* LAYOUT */
    .container { max-width: 1100px; margin: 20px auto; padding: 0 20px; }
    .section { margin-bottom: 40px; }
    .cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px; }
    .card { background: var(--card); border-radius: 12px; overflow: hidden; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
    .card img { width: 100%; height: 150px; object-fit: cover; }
    .card-content { padding: 14px; }
    .card h3 { margin: 0 0 6px; }
    .card p { margin: 4px 0; font-size: 13px; color: var(--muted); }
    .posted-by { font-size: 12px; margin-top: 6px; }
    .posted-by span { color: var(--accent); cursor: pointer; }

    /* MODAL */
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display: none; align-items: center; justify-content: center; }
    .modal-content { background: #fff; padding: 20px; border-radius: 12px; width: 350px; max-height: 80vh; overflow: auto; }
    
    .add-space { background: #4f46e5; color: #fff; padding: 6px 12px; font-size: 0.9rem; border: none; border-radius: 6px; cursor: pointer; }
    .category-tabs { display: flex; justify-content: center; align-items: center; gap: 16px; margin: 16px 0; }
    .section-header { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
    .section-header h2 { margin: 0; font-size: 1.2rem; }
    </style>
</head>

<body>

<div class="navbar">
  <div class="brand">
    <img src="./logo.png" alt="CommonGround Logo" class="logo">
    <h1>CommonGround</h1>
  </div>

  <div class="category-tabs">
    <button class="category-tab active" data-category="Creative" style="background-color: #0688d4; color: white; border-radius: 10px; padding: 10px;">Creative</button>
    <button class="category-tab" data-category="Quiet" style="background-color: #0688d4; color: white; border-radius: 10px; padding: 10px;">Quiet</button>
    <button class="category-tab" data-category="Active" style="background-color: #0688d4; color: white; border-radius: 10px; padding: 10px;">Active</button>
    <button class="category-tab" data-category="Social" style="background-color: #0688d4; color: white; border-radius: 10px; padding: 10px;">Social</button>
    <button class="category-tab" data-category="Other" style="background-color: #0688d4; color: white; border-radius: 10px; padding: 10px;">Other</button>
  </div>

  <div class="profile-btn" id="myProfileBtn">My Profile</div>
</div>

<main class="container">
  <section class="section">
    <div class="section-header">
      <h2>Thirdspaces</h2>
      <button class="add-space" type="button" onclick="window.location.href='./add-thirdspace.html'">Add a Thirdspace</button>
    </div>
    <div class="cards" id="thirdspaceContainer"></div>
  </section>

  <section class="section">
    <div class="section-header">
      <h2>Events</h2>
      <button class="add-space" onclick="window.location.href='./add-event.html'">Post an Event</button>
    </div>
    <div class="cards" id="eventContainer"></div>
  </section>
</main>

<div class="modal" id="profileModal">
  <div class="modal-content" id="profileContent"></div>
</div>

<script>
/* ================= USERS & DATA ================= */
const users = [
  { id:1, name:"Alex Rivera", bio:"Community builder & coffee lover", avatar:"https://randomuser.me/api/portraits/men/32.jpg" },
  { id:2, name:"Jamie Chen", bio:"Outdoor enthusiast & event host", avatar:"https://randomuser.me/api/portraits/women/44.jpg" }
];

const currentUser = users[0];

const thirdspaces = [
    { "name": "Veterans Park", image:"https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb", postedBy:1, description: "Great for pickeball sessions, picnics, walks, and volleyball." },
    { "name": "New Brunswick Library", image:"https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb", postedBy:1, description: "Good place for meet ups and browsing." }
    // ... add your other data here
];

const events = [
    { "event_id": 1, "title": "Pickleball Mixer", "image": "https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb", "description": "Open play for all skill levels.", postedBy: 2 },
    { "event_id": 2, "title": "Silent Reading Hour", "image": "https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb", "description": "Bring your current read.", postedBy: 2 }
];

/* ================= RENDER LOGIC ================= */
function getUser(id) { return users.find(u => u.id === id); }

function renderThirdspaces() {
  const container = document.getElementById("thirdspaceContainer");
  container.innerHTML = "";
  thirdspaces.forEach(space => {
    const user = getUser(space.postedBy);
    container.innerHTML += `
      <div class="card">
        <img src="${space.image}">
        <div class="card-content">
          <h3>${space.name}</h3>
          <p>${space.description}</p>
          <div class="posted-by">Posted by <span onclick="openProfile(${user.id})">${user.name}</span></div>
        </div>
      </div>`;
  });
}

function renderEvents() {
  const container = document.getElementById("eventContainer");
  container.innerHTML = "";
  events.forEach(event => {
    const user = getUser(event.postedBy);
    container.innerHTML += `
      <div class="card">
        <img src="${event.image}">
        <div class="card-content">
          <h3>${event.title}</h3>
          <p>${event.description}</p>
          <div class="posted-by">Posted by <span onclick="openProfile(${user.id})">${user.name}</span></div>
        </div>
      </div>`;
  });
}

function openProfile(userId) {
  const user = getUser(userId);
  const modal = document.getElementById("profileModal");
  const content = document.getElementById("profileContent");
  content.innerHTML = `
    <div style="text-align:center">
      <img src="${user.avatar}" style="width:80px;border-radius:50%">
      <h3>${user.name}</h3>
      <p>${user.bio}</p>
    </div>
    <button onclick="closeProfile()">Close</button>`;
  modal.style.display = "flex";
}

function closeProfile() { document.getElementById("profileModal").style.display = "none"; }

document.getElementById("myProfileBtn").onclick = () => openProfile(currentUser.id);

renderThirdspaces();
renderEvents();
</script>
</body>
</html>